<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Franco Montenegro" />
  <meta name="dcterms.date" content="2021-02-17" />
  <title>A short, pocket-hand notes on how to write good code</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      word-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {  background-color: #f8f8f8; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ef2929; } /* Alert */
    code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #c4a000; } /* Attribute */
    code span.bn { color: #0000cf; } /* BaseN */
    code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4e9a06; } /* Char */
    code span.cn { color: #000000; } /* Constant */
    code span.co { color: #8f5902; font-style: italic; } /* Comment */
    code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
    code span.dt { color: #204a87; } /* DataType */
    code span.dv { color: #0000cf; } /* DecVal */
    code span.er { color: #a40000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #0000cf; } /* Float */
    code span.fu { color: #000000; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
    code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
    code span.ot { color: #8f5902; } /* Other */
    code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
    code span.sc { color: #000000; } /* SpecialChar */
    code span.ss { color: #4e9a06; } /* SpecialString */
    code span.st { color: #4e9a06; } /* String */
    code span.va { color: #000000; } /* Variable */
    code span.vs { color: #4e9a06; } /* VerbatimString */
    code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">A short, pocket-hand notes on how to write good code</h1>
<p class="author">Franco Montenegro</p>
<p class="date">February 17, 2021</p>
</header>
<h1 id="who-are-you-coding-for">Who are you coding for</h1>
<p>Let’s begin really simple and by establishing this fact that more than often gets forgotten by developers. Code is written for and by developers, this means:</p>
<ul>
<li>it has to be readable, <strong>easily</strong></li>
<li>do not try to be smart</li>
<li>do not hide behind clever abstractions</li>
<li>do not over engineer solutions</li>
<li>leave comments and notes</li>
</ul>
<p>But, this is harder than what it looks like, specially with how the “business” and the market is, where everyone is trying to push features like crazy and get some money so we can rush to the next thing. Now, do not get my wrong, I understand the need of doing so and I’m not complaining, this is why this book is written taken this into consideration and any other constrains such as deadlines as well. If you think the current state of the market is sad because of this, think of it as a challenge, are you able to write good code under this constrains? if you had all the time in the world nothing would get done and it would just be plain boring, so, let’s crack into it!</p>
<h1 id="names">Names</h1>
<p>Simple and strait forward, names need to be short, sweet and to the point. If you can’t think of a good name, leave a comment and make sure that, when you have a deeper understanding of the problem you come back and refactor. Sometimes when we can’t name our variables, functions and any other components properly it’s because we don’t quite understand the problem we are solving yet, and that perfectly normal and valid, as long as, when you gain deeper knowledge you come back and clean after yourself by choosing a more descriptive name.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> n()</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> p = <span class="dv">42</span>;</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> p;</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Extreme example, I know, but let’s refactor:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> get_maximum_age()</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> maximum_age = <span class="dv">42</span>;</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> maximum_age;</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Short, sweet and to the point, no ambiguity whatsoever.</p>
<h1 id="code-style">Code style</h1>
<p>The key point here is to be consistent, it doesn’t matter if you wanna use tabs or spaces for your indentation; or if you wanna use camel case, snake case, etc., just focus on being consistent. Another important key point is that, every project is like a house. When you are in your friend’s house you need to play along their rules and be respectful, you don’t act like crazy and nor should you do so with a project. Learn what are the rules of your project, learn the code styling they are using and apply it. You can provide suggestions, but you do not want to enforce anything.</p>
<p>If you can start your project with an automatic code formatter that’s pretty good and will save you some time. If on the other hand the project already exists, try formatting it all at once, this will avoid dealing with huge commits because of the formatter doing it’s job on everyone’s changes. Make sure that, if you do so, you let your entire team know to avoid dealing with merge conflicts.</p>
<h1 id="over-engineer">Over engineer</h1>
<p>Do not start trying to hit the perfect implementation, API or abstraction, you wont. The reason is that, you are trying to perfect something that doesn’t even exist yet, which means, you are establishing facts based on things that, again, you don’t still know. What you will end up with is, a clearly forced over engineer abstraction and this is one of the worst things to end up with.</p>
<p>Missing an abstraction is fine, we can always come back, refactor and built one based on the errors/imperfections we can <strong>clearly</strong> see, but, having the wrong abstraction could lead you to much worse results. This is because you are enforcing a way of doing things.</p>
<h2 id="expanding-on-clearly-see-the-errorsimperfections">Expanding on “clearly” see the errors/imperfections</h2>
<p>Every single project you come in, you probably are disgusted by how things are built and, if you are not, I’m very happy for you, you found a pretty good project to work on and learn from!</p>
<p>Now, going back to reality, probably you are on a project where you can see tons of errors or things that wanna make you go crazy and hunt down the previous developer. Just don’t, and let me tell you why. When that developer was working on the crap you are sitting on, he/she didn’t knew the things you now can clearly see, such as, patterns, structures. You are literally seeing his/her experience on your monitor, so let’s learn from it and <strong>slowly</strong> and <strong>safely</strong> refactor, avoiding the mess from getting bigger.</p>
<h1 id="slow-and-safe-refactoring">Slow and safe refactoring</h1>
<p>Going back to my previous suggestion on slowly and safely refactoring, I’m making special emphasis on <strong>slowly</strong> and <strong>safely</strong> refactoring because you don’t wanna be the new developer who came in and broke the entire system just because a refactor. That won’t gonna cut it.</p>
<p>I understand your urge to go and clean everything up, after all, you see all this mess piling up for quite some time now, but that’s not how the world works and it’s simply not a very good strategy. This is a team effort, a task that will take time and that needs to be done by everyone little by little. This allows things to not break from one day to another, and it also allows your teammates to become familiar with the new changes.</p>
<h1 id="coding-things-you-dont-quite-understand-yet">Coding things you don’t quite understand yet</h1>
<p>Sometimes we get a rough idea on how the system, library, component will work but we are not clear on the inner details, sometimes is quite the opposite, we can clearly see how the internal components will work but we haven’t yet decided how this will integrate in the bigger picture. My advice to this is to simple begin with the things you currently know and don’t assume anything you are not sure about. Begin simple and dirty, you will be able to refactor it later when you clearly see the errors/imperfections.</p>
<p>Let’s go with an example, we need to build a function that allows to move an entity from A to B.</p>
<p>We could start with</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> move_entity(...)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Now what?, do we ask for the whole entity in the parameters? do we create a new structure to hold coordinates with X and Y? what if we later decide to add 3D, we would also need Z in the structure, should we add it? what if…</p>
<p>You get the idea, just stop and work with the details you got and know.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> move_entity(<span class="kw">struct</span> Entity entity, <span class="dt">int</span> to_x, <span class="dt">int</span> to_y)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    entity.x = to_x;</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    entity.y = to_y;</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Simple right?, now it’s the time to refactor:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Location</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x;</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> y;</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>};</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> move_entity(<span class="kw">struct</span> Entity entity, <span class="kw">struct</span> Location to)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    entity.x = to.x;</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    entity.y = to.y;</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Can we do better? well it would make sense to refactor <code>struct Entity</code> to have a <code>struct Location</code> instead of plain <code>x</code> and <code>y</code>. But, before doing so make sure you do a slow and safe refactor.</p>
<h1 id="comments">Comments</h1>
<p>Some people will tell you that you don’t really need comments, that your code should be descriptive enough to tell the developers reading it everything they need to know. Others will tell you, comments are essential and that you need to write comments for every single function you got. Being honest, I went through both of these statements, and my suggestion would be to apply both. There is code that definitely needs comments and some that simply don’t, here is an example:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> get_pi()</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> PI;</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Would you add comments to that function? of course no. Would you comment every single line of comment?</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> i;</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Set i to 42</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>i = <span class="dv">42</span>;</span></code></pre></div>
<p>Again no, there is no need for that, the code is already telling us that. But what about intention?, why are we setting <code>i = 42</code>? have you thought about that?</p>
<p>And this is the kind of comments projects usually need, intention, and notes that we can’t clearly and simple see by just reading the code.</p>
<h1 id="understanding-what-the-code-does">Understanding what the code does</h1>
<p>If something you wrote works but you don’t know why, that’s a ticking bomb ready to explode in the near feature. Not only that, it’s very unprofessional, imagining yourself not being able to answer to your client why and how does this works.</p>
<p>Understand the instructions you are giving to the computer, and if you don’t, it may suggest that either you don’t fully understand the problem you are solving or, your code is not simply easy to follow/read. In any case, go back until you get a simple solution.</p>
<h1 id="parameters">Parameters</h1>
<p>TODO</p>
<h1 id="clear-responsibility-on-functions">Clear responsibility on functions</h1>
<p>TODO</p>
<h1 id="design-patterns">Design patterns</h1>
<p>TODO</p>
<h1 id="handling-errors">Handling errors</h1>
<p>TODO</p>
</body>
</html>
